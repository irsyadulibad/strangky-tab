(()=>{"use strict";const e=(e=null)=>null!=e?(e=Boolean(e),localStorage.setItem("livebg",e),e):null==localStorage.getItem("livebg")?null:"true"==localStorage.getItem("livebg"),t=(e=null)=>(null!=e&&localStorage.setItem("name",String(e)),localStorage.getItem("name")),a=(e=null)=>(null!=e&&localStorage.setItem("timeformat",e),localStorage.getItem("timeformat"));var n,o,r,i,s;const c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(){n=new Date,o=n.getHours(),r=n.getMinutes(),i=n.getDay(),s=n.getMonth()}function u(e=24){d();let t=24==e?o:o>12?o-12:o;return t=t<10?`0${t}`:t,{meridiem:o>12?"PM":"AM",hour:t,minute:r<10?`0${r}`:r}}function g(){return d(),{month:s,day:c[i],date:n.getDate(),monthName:l[s],year:n.getFullYear()}}!async function(){const n=new class{background=document.querySelector(".background");changeBg=document.querySelector(".changebackground");static liveBgInterval;constructor(){(null==e()||e())&&this.liveBackground(),this.setBackground()}liveBackground(t=1e4){e(!0),this.changeBg.style.display="none",this._liveBackground(),this.liveBgInterval=setInterval((()=>{this._liveBackground()}),t)}customBackground(){e(!1),this.changeBg.style.display="block",clearInterval(this.liveBgInterval)}setBackground(e=null){e=e||localStorage.getItem("background"),localStorage.setItem("background",e),this.background.style.background=`linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2)), url(${e})`,this.background.style.backgroundRepeat="no-repeat",this.background.style.backgroundPosition="center",this.background.style.backgroundSize="cover"}async _liveBackground(){const e=window.screen.availHeight,t=window.screen.availWidth;fetch(`https://source.unsplash.com/random/${e}x${t}`).then((e=>e)).then((e=>{this.setBackground(e.url)}))}};new class{modal=document.querySelector(".modal-overlay");closeBtn=document.querySelector(".closebtn");settingsBtn=document.querySelector(".settings");radioLiveBg=document.getElementById("live-background");radioCustBg=document.getElementById("custom-background");imageBtn=document.getElementById("upload_button");imageIpt=document.getElementById("files");clockFormat=document.getElementById("myclock");constructor(e){this.background=e,this._initListeners(),this._setValues()}show=()=>this.modal.style.display="block";hide=()=>this.modal.style.display="none";async handleImageUpload(e){const t=e.target.files[0];if(!t.type.match("image.*"))return void alert("Not an valid image");const a=await function(e){return new Promise(((t,a)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=()=>a("error"),n.readAsDataURL(e)}))}(t);this.background.setBackground(a)}_initListeners(){this.settingsBtn.addEventListener("click",(()=>this.show())),this.closeBtn.addEventListener("click",(()=>this.hide())),this.radioLiveBg.addEventListener("click",(()=>this.background.liveBackground())),this.radioCustBg.addEventListener("click",(()=>this.background.customBackground())),this.imageBtn.addEventListener("click",(()=>this.imageIpt.click())),this.imageIpt.addEventListener("change",(e=>this.handleImageUpload(e))),this.clockFormat.addEventListener("change",(()=>a(this.clockFormat.value)))}_setValues(){const t=e()?this.radioLiveBg:this.radioCustBg,n=12==a()?0:1;t.checked=!0,this.clockFormat.selectedIndex=n}}(n),new class{letters=document.querySelector(".letters");prayTime=document.querySelector(".info-sholat");nameIpt=document.getElementById("name");constructor(){null==t()&&t("Unnamed"),this.nameIpt.value=t(),this._greet(),this._initListeners()}_greet(){this.letters.innerHTML=`${d(),o<1?"Midnight":o<11?"Good Morning":o<18?"Good Afternoon":"Good Evening"}, ${t()}`,this.prayTime.innerHTML=(d(),o<2?"Menjelang Subuh":o<5?"Waktu Subuh":o<10?"Menjelang Dzuhur":o<13?"Waktu Dzuhur":o<14?"Menjelang Ashar":o<16?"Waktu Ashar":o<18?"Menjelang Maghrib":o<19?"Waktu Maghrib":"Waktu Isya")}_initListeners(){this.nameIpt.addEventListener("keyup",(()=>{t(this.nameIpt.value),this._greet()}))}},new class{calendar=document.querySelector(".dateday");clock=document.querySelector(".clock");static calendarInterval;constructor(){this.updateCalendar(),this.updateClock(),this.calendarInterval=setInterval((()=>{this.updateCalendar(),this.updateClock()}),1e3)}updateClock(){if(12==a()){const{hour:e,minute:t,meridiem:a}=u(12);this.clock.innerHTML=`${e}:${t} <span class="pm">${a}</span>`}else{const{hour:e,minute:t}=u(24);this.clock.innerHTML=`${e}:${t}`}}updateCalendar(){const{day:e,date:t,monthName:a,year:n}=g();this.calendar.innerHTML=`${e}, ${t} ${a} ${n}`}},new class{weatherInfo=document.querySelector(".weather-info");constructor(){this._init()}async _init(){const e=await new Promise(((e,t)=>{navigator.geolocation.getCurrentPosition(e,t)})),t=await(async(e,t)=>{try{const a=await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${e}&longitude=${t}&localityLanguage=id`);return await a.json()}catch(e){console.error(e.response)}})(e.coords.latitude,e.coords.longitude),a=t.locality?t.locality:"Bondowoso",n=await(async e=>{try{const t=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=1fe5f03e8b679377cbc41601289edfdd&units=metric`);return await t.json()}catch(e){console.error(e.response)}})(a),o=`\n      <div class="body-weather" title="${n.weather[0].description}">\n         <div class="icon">\n         ${"clouds"===n.weather[0].main.toLowerCase()?' <i class="fas fa-clouds"></i>':' <i class="fas fa-cloud-rain"></i>'}\n         </div>\n         <div class="text-temperature">\n         <p class="text">${n.main.temp}&deg;</p>\n         <p class="location">${n.name}</p>\n         </div>\n      </div>\n     \n     `;this.weatherInfo.innerHTML=o}}}()})();